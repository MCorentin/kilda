manifest {
    name = "KILDA"
    author = "Corentin Molitor"
    homePage = "https://github.com/orgs/HCL-HUBL/KILDA"
    description = "KIv2 Length Determined from a kmer Analysis"
    mainScript = "kilda.nf"
    version = "1.3.0"
    nextflowVersion = "21+"
}

executor {
    name = 'local'
    cpus = 25
    memory = "100GB"
}

singularity {
	enabled = true
}

process {
    executor = 'local'

    cpus = 1
    maxForks = 25

    mem_per_task = 6
    memory = "6GB"

    container = "$launchDir/../kiv2_20240530_0.2.sif"
}

params {
    kilda_dir = "$launchDir/../"
    wdir = "${kilda_dir}/test_dataset/results/"

    kmer_size = 31

    rsids_list = "${kilda_dir}/data/lpa_three_rsids.tsv" // this file is optional
    
    // Fields to fill if you need to build a new kmer DB:
    kmer_DB {
        build_DB = false
        
        outdir = ""
        
        genome_fasta = ""
        genome_fai = ""
        
        norm_bed = ""
        kiv2_bed = ""
    }

    // Fields to fill to count KIV2 repeats:
    count {
        count_kiv2 = true
        
        samplesheet = "${kilda_dir}/test_dataset/samplesheet.txt"
        
        kiv2_kmers = "${kilda_dir}/data/kmers_GRCh38_LPA_k31/KIV2_hg38_kmers_6copies_specific.tsv"
        norm_kmers = "${kilda_dir}/data/kmers_GRCh38_LPA_k31/LPA_hg38_kmers_1copies_specific.tsv"
    }

    // Does not need to be changed if you are using the Singularity image:
    tools {
        jellyfish = "jellyfish"
        bedtools = "bedtools"
        samtools = "samtools"
        python = "python3"
       
        kilda = "${kilda_dir}/bin/kilda.py"
    }
}
